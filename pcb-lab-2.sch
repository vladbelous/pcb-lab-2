EESchema Schematic File Version 4
EELAYER 30 0
EELAYER END
$Descr USLetter 11000 8500
encoding utf-8
Sheet 1 1
Title "PCB Lab 2"
Date "2020-06-14"
Rev ""
Comp ""
Comment1 "CC BY-SA 4.0"
Comment2 "(C) Vlad Belous"
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L local_symbols:NCS2333 U?
U 1 1 5EF15D9A
P 7350 1850
F 0 "U?" H 7050 1950 50  0000 L CNN
F 1 "NCS2333" H 6850 1850 50  0000 L CNN
F 2 "local_footprints:SOIC-8_3.9x4.9mm_Pitch1.27mm_HS" H 7350 1500 50  0001 C CNN
F 3 "" H 7400 1850 50  0001 C CNN
	1    7350 1850
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 5EF15DAE
P 7650 2150
F 0 "#PWR?" H 7650 1900 50  0001 C CNN
F 1 "GND" H 7655 1977 50  0000 C CNN
F 2 "" H 7650 2150 50  0001 C CNN
F 3 "" H 7650 2150 50  0001 C CNN
	1    7650 2150
	1    0    0    -1  
$EndComp
$Comp
L local_symbols:NCS2333 U?
U 3 1 5EF2285A
P 3700 1850
F 0 "U?" H 3850 2150 50  0000 C CNN
F 1 "NCS2333" H 3850 2050 50  0000 C CNN
F 2 "local_footprints:SOIC-8_3.9x4.9mm_Pitch1.27mm_HS" H 3700 1500 50  0001 C CNN
F 3 "" H 3750 1850 50  0001 C CNN
	3    3700 1850
	1    0    0    1   
$EndComp
Text GLabel 2950 1250 0    50   Input ~ 0
V+
Wire Wire Line
	3000 1900 2950 1900
Text GLabel 2950 1900 0    50   Input ~ 0
V2-
Text Notes 2900 2200 0    50   ~ 0
Load
Wire Wire Line
	3000 1900 3000 2050
Connection ~ 3000 1900
$Comp
L Device:R_Small R?
U 1 1 5EF339BE
P 3250 1450
F 0 "R?" H 3309 1496 50  0000 L CNN
F 1 "100" H 3309 1405 50  0000 L CNN
F 2 "" H 3250 1450 50  0001 C CNN
F 3 "~" H 3250 1450 50  0001 C CNN
	1    3250 1450
	1    0    0    -1  
$EndComp
$Comp
L Device:R_Small R?
U 1 1 5EF341B9
P 4500 2250
F 0 "R?" H 4559 2296 50  0000 L CNN
F 1 "10k" H 4559 2205 50  0000 L CNN
F 2 "" H 4500 2250 50  0001 C CNN
F 3 "~" H 4500 2250 50  0001 C CNN
	1    4500 2250
	1    0    0    -1  
$EndComp
$Comp
L Device:Q_PMOS_GSD Q?
U 1 1 5EF34E53
P 4400 1850
F 0 "Q?" H 4605 1804 50  0000 L CNN
F 1 "FDV302P" H 4605 1895 50  0000 L CNN
F 2 "" H 4600 1950 50  0001 C CNN
F 3 "~" H 4400 1850 50  0001 C CNN
	1    4400 1850
	1    0    0    1   
$EndComp
Wire Wire Line
	4500 2050 4500 2100
Wire Wire Line
	4500 2350 4500 2400
$Comp
L power:GND #PWR?
U 1 1 5EF3FB5B
P 4500 2400
F 0 "#PWR?" H 4500 2150 50  0001 C CNN
F 1 "GND" H 4505 2227 50  0000 C CNN
F 2 "" H 4500 2400 50  0001 C CNN
F 3 "" H 4500 2400 50  0001 C CNN
	1    4500 2400
	1    0    0    -1  
$EndComp
$Comp
L Device:R_Small R?
U 1 1 5EF4027E
P 4100 1450
F 0 "R?" H 4041 1404 50  0000 R CNN
F 1 "100k" H 4041 1495 50  0000 R CNN
F 2 "" H 4100 1450 50  0001 C CNN
F 3 "~" H 4100 1450 50  0001 C CNN
	1    4100 1450
	-1   0    0    1   
$EndComp
Connection ~ 4500 2100
Wire Wire Line
	4500 2100 4500 2150
Wire Wire Line
	3400 1900 3000 1900
$Comp
L Device:R_Small R?
U 1 1 5EF51AC3
P 3000 1450
F 0 "R?" H 2942 1404 50  0000 R CNN
F 1 "1" H 2942 1495 50  0000 R CNN
F 2 "" H 3000 1450 50  0001 C CNN
F 3 "~" H 3000 1450 50  0001 C CNN
	1    3000 1450
	1    0    0    1   
$EndComp
Wire Wire Line
	3250 1550 3250 1600
Wire Wire Line
	3250 1800 3400 1800
Wire Wire Line
	3000 1550 3000 1900
Wire Wire Line
	4500 1600 4500 1650
Connection ~ 3250 1600
Wire Wire Line
	3250 1600 3250 1800
Wire Wire Line
	4000 1850 4100 1850
Connection ~ 4100 1850
Wire Wire Line
	4100 1850 4200 1850
Wire Wire Line
	3000 1250 3000 1350
Connection ~ 3000 1250
Wire Wire Line
	3000 1250 2950 1250
Wire Wire Line
	3250 1250 3250 1350
Connection ~ 3250 1250
Wire Wire Line
	3250 1250 3000 1250
Wire Wire Line
	4100 1250 4100 1350
Wire Wire Line
	4100 1550 4100 1850
Text Notes 4150 1300 0    50   ~ 0
pull-up
Text Notes 2650 2900 0    50   ~ 0
High-side current sensing: op amp + transistor;\nSimilar to ZXCT1009 or LTC6102.
$Comp
L Amplifier_Current:INA181 U?
U 1 1 5EF82514
P 8850 4850
F 0 "U?" H 9000 4750 50  0000 L CNN
F 1 "INA181" H 9000 4650 50  0000 L CNN
F 2 "Package_TO_SOT_SMD:SOT-23-6" H 8900 4900 50  0001 C CNN
F 3 "http://www.ti.com/lit/ds/symlink/ina181.pdf" H 9000 5000 50  0001 C CNN
	1    8850 4850
	1    0    0    -1  
$EndComp
Text Notes 7850 5650 0    50   ~ 0
INA181A3 variant with 100V/V gain
$Comp
L Device:R_Small R?
U 1 1 5EF83B05
P 8150 4550
F 0 "R?" H 8092 4504 50  0000 R CNN
F 1 "1" H 8092 4595 50  0000 R CNN
F 2 "" H 8150 4550 50  0001 C CNN
F 3 "~" H 8150 4550 50  0001 C CNN
	1    8150 4550
	1    0    0    1   
$EndComp
Text GLabel 8100 4350 0    50   Input ~ 0
V+
Wire Wire Line
	8100 4350 8150 4350
Wire Wire Line
	8150 4350 8150 4450
Wire Wire Line
	8150 4950 8550 4950
Wire Wire Line
	8150 4950 8150 5100
Text Notes 8050 5200 0    50   ~ 0
Load
Connection ~ 8150 4950
Wire Wire Line
	8150 4650 8150 4950
Text GLabel 8100 4950 0    50   Input ~ 0
V-
Wire Wire Line
	8100 4950 8150 4950
Wire Wire Line
	8150 4350 8400 4350
Wire Wire Line
	8400 4350 8400 4750
Wire Wire Line
	8400 4750 8550 4750
Connection ~ 8150 4350
Text GLabel 8700 4350 0    50   Input ~ 0
VCC
Wire Wire Line
	8700 4350 8750 4350
Wire Wire Line
	8750 4350 8750 4550
$Comp
L power:GND #PWR?
U 1 1 5EF9B209
P 8750 5150
F 0 "#PWR?" H 8750 4900 50  0001 C CNN
F 1 "GND" H 8755 4977 50  0000 C CNN
F 2 "" H 8750 5150 50  0001 C CNN
F 3 "" H 8750 5150 50  0001 C CNN
	1    8750 5150
	1    0    0    -1  
$EndComp
Wire Wire Line
	8950 5150 8750 5150
Connection ~ 8750 5150
Wire Wire Line
	9150 4850 9300 4850
Text GLabel 9300 4850 2    50   Input ~ 0
VOUT
Wire Notes Line
	7850 4200 9650 4200
Wire Notes Line
	9650 4200 9650 5450
Wire Notes Line
	9650 5450 7850 5450
Wire Notes Line
	7850 5450 7850 4200
Text Notes 7850 5550 0    50   ~ 0
High-side current sensing with INA181, separate suppy.
Text GLabel 2200 1250 2    50   Input ~ 0
V+
$Comp
L Connector_Generic:Conn_01x02 J?
U 1 1 5EF73846
P 1900 1250
F 0 "J?" H 1900 1350 50  0000 C CNN
F 1 "Conn_01x02" H 1818 1376 50  0001 C CNN
F 2 "" H 1900 1250 50  0001 C CNN
F 3 "~" H 1900 1250 50  0001 C CNN
	1    1900 1250
	-1   0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 5EF7427A
P 2200 1400
F 0 "#PWR?" H 2200 1150 50  0001 C CNN
F 1 "GND" H 2205 1227 50  0000 C CNN
F 2 "" H 2200 1400 50  0001 C CNN
F 3 "" H 2200 1400 50  0001 C CNN
	1    2200 1400
	1    0    0    -1  
$EndComp
Wire Wire Line
	2100 1250 2200 1250
Wire Wire Line
	2100 1350 2200 1350
Wire Wire Line
	2200 1350 2200 1400
$Comp
L Connector_Generic:Conn_01x02 J?
U 1 1 5EF75BA2
P 1900 1900
F 0 "J?" H 1900 2000 50  0000 C CNN
F 1 "Conn_01x02" H 1818 2026 50  0001 C CNN
F 2 "" H 1900 1900 50  0001 C CNN
F 3 "~" H 1900 1900 50  0001 C CNN
	1    1900 1900
	-1   0    0    -1  
$EndComp
Text GLabel 2200 1900 2    50   Input ~ 0
V2-
$Comp
L power:GND #PWR?
U 1 1 5EF75EDC
P 2200 2050
F 0 "#PWR?" H 2200 1800 50  0001 C CNN
F 1 "GND" H 2205 1877 50  0000 C CNN
F 2 "" H 2200 2050 50  0001 C CNN
F 3 "" H 2200 2050 50  0001 C CNN
	1    2200 2050
	1    0    0    -1  
$EndComp
Wire Wire Line
	2100 1900 2200 1900
Wire Wire Line
	2100 2000 2200 2000
Wire Wire Line
	2200 2000 2200 2050
$Comp
L power:GND #PWR?
U 1 1 5EF77C28
P 3000 2400
F 0 "#PWR?" H 3000 2150 50  0001 C CNN
F 1 "GND" H 3005 2227 50  0000 C CNN
F 2 "" H 3000 2400 50  0001 C CNN
F 3 "" H 3000 2400 50  0001 C CNN
	1    3000 2400
	1    0    0    -1  
$EndComp
Wire Wire Line
	3000 2400 3000 2250
$Comp
L Device:R_POT RV?
U 1 1 5EF791A3
P 4950 2250
F 0 "RV?" H 4880 2296 50  0000 R CNN
F 1 "R_POT" H 4880 2205 50  0000 R CNN
F 2 "" H 4950 2250 50  0001 C CNN
F 3 "~" H 4950 2250 50  0001 C CNN
	1    4950 2250
	-1   0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 5EF7CA72
P 4950 2400
F 0 "#PWR?" H 4950 2150 50  0001 C CNN
F 1 "GND" H 4955 2227 50  0000 C CNN
F 2 "" H 4950 2400 50  0001 C CNN
F 3 "" H 4950 2400 50  0001 C CNN
	1    4950 2400
	1    0    0    -1  
$EndComp
Text GLabel 5250 2100 2    50   Input ~ 0
VOUT2
$Comp
L Connector_Generic:Conn_01x02 J?
U 1 1 5EF7FA91
P 6350 2100
F 0 "J?" H 6350 2200 50  0000 C CNN
F 1 "Conn_01x02" H 6268 2226 50  0001 C CNN
F 2 "" H 6350 2100 50  0001 C CNN
F 3 "~" H 6350 2100 50  0001 C CNN
	1    6350 2100
	1    0    0    -1  
$EndComp
Text GLabel 6050 2100 0    50   Input ~ 0
VOUT2
Wire Wire Line
	6150 2200 6050 2200
Wire Wire Line
	6050 2200 6050 2250
Wire Wire Line
	6050 2100 6150 2100
$Comp
L power:GND #PWR?
U 1 1 5EF829BE
P 6050 2250
F 0 "#PWR?" H 6050 2000 50  0001 C CNN
F 1 "GND" H 6055 2077 50  0000 C CNN
F 2 "" H 6050 2250 50  0001 C CNN
F 3 "" H 6050 2250 50  0001 C CNN
	1    6050 2250
	1    0    0    -1  
$EndComp
Text Notes 800  1450 0    50   ~ 0
V+ is shared between\nhigh-side and low-side\ncircuits
Text Notes 900  2000 0    50   ~ 0
Load connection,\nif sensing high-side.
Wire Wire Line
	4800 2250 4800 2400
Wire Wire Line
	4800 2400 4950 2400
Connection ~ 4950 2400
Wire Wire Line
	4500 2100 4950 2100
Wire Wire Line
	4950 2100 5250 2100
Connection ~ 4950 2100
Wire Wire Line
	3250 1800 3250 2350
Connection ~ 3250 1800
$Comp
L Device:C_Small C?
U 1 1 5EFA60D6
P 3700 2350
F 0 "C?" V 3900 2350 50  0000 C CNN
F 1 "0.1u" V 3800 2350 50  0000 C CNN
F 2 "" H 3700 2350 50  0001 C CNN
F 3 "~" H 3700 2350 50  0001 C CNN
	1    3700 2350
	0    1    1    0   
$EndComp
Wire Wire Line
	4100 1850 4100 2350
Wire Wire Line
	3250 2350 3600 2350
Wire Wire Line
	3800 2350 4100 2350
Wire Wire Line
	3000 3400 3000 3500
Wire Wire Line
	2950 3400 3000 3400
Text GLabel 2950 3400 0    50   Input ~ 0
V+
$Comp
L Connector_Generic:Conn_01x02 J?
U 1 1 5EF82E21
P 1900 3650
F 0 "J?" H 1900 3750 50  0000 C CNN
F 1 "Conn_01x02" H 1818 3776 50  0001 C CNN
F 2 "" H 1900 3650 50  0001 C CNN
F 3 "~" H 1900 3650 50  0001 C CNN
	1    1900 3650
	-1   0    0    -1  
$EndComp
Text GLabel 2200 3750 2    50   Input ~ 0
V1-
$Comp
L power:GND #PWR?
U 1 1 5EFC767B
P 5350 4100
F 0 "#PWR?" H 5350 3850 50  0001 C CNN
F 1 "GND" H 5355 3927 50  0000 C CNN
F 2 "" H 5350 4100 50  0001 C CNN
F 3 "" H 5350 4100 50  0001 C CNN
	1    5350 4100
	1    0    0    -1  
$EndComp
Wire Wire Line
	5350 3950 5450 3950
Wire Wire Line
	5350 4050 5350 4100
Wire Wire Line
	5450 4050 5350 4050
Text GLabel 5350 3950 0    50   Input ~ 0
VOUT1
$Comp
L Connector_Generic:Conn_01x02 J?
U 1 1 5EFC766D
P 5650 3950
F 0 "J?" H 5650 4050 50  0000 C CNN
F 1 "Conn_01x02" H 5568 4076 50  0001 C CNN
F 2 "" H 5650 3950 50  0001 C CNN
F 3 "~" H 5650 3950 50  0001 C CNN
	1    5650 3950
	1    0    0    -1  
$EndComp
Wire Wire Line
	4550 4700 4550 4750
$Comp
L power:GND #PWR?
U 1 1 5EFC5803
P 4550 4750
F 0 "#PWR?" H 4550 4500 50  0001 C CNN
F 1 "GND" H 4555 4577 50  0000 C CNN
F 2 "" H 4550 4750 50  0001 C CNN
F 3 "" H 4550 4750 50  0001 C CNN
	1    4550 4750
	1    0    0    -1  
$EndComp
Wire Wire Line
	4100 4250 4100 4350
Wire Wire Line
	4550 4250 4100 4250
Wire Wire Line
	4550 4400 4550 4250
Wire Wire Line
	4400 4550 4100 4550
Connection ~ 4100 4250
Connection ~ 4100 4550
$Comp
L Device:R_Small R?
U 1 1 5EFB674B
P 4100 4650
F 0 "R?" H 4159 4696 50  0000 L CNN
F 1 "100" H 4159 4605 50  0000 L CNN
F 2 "" H 4100 4650 50  0001 C CNN
F 3 "~" H 4100 4650 50  0001 C CNN
	1    4100 4650
	1    0    0    -1  
$EndComp
$Comp
L Device:R_Small R?
U 1 1 5EFB615A
P 4100 4450
F 0 "R?" H 4159 4496 50  0000 L CNN
F 1 "9.9k" H 4159 4405 50  0000 L CNN
F 2 "" H 4100 4450 50  0001 C CNN
F 3 "~" H 4100 4450 50  0001 C CNN
	1    4100 4450
	1    0    0    -1  
$EndComp
Connection ~ 3300 4250
Wire Wire Line
	3300 4550 3300 4250
Wire Wire Line
	4100 3950 4250 3950
Connection ~ 4100 3950
Wire Wire Line
	4100 4250 3800 4250
Wire Wire Line
	4100 3950 4100 4250
Wire Wire Line
	3950 3950 4100 3950
Wire Wire Line
	3300 4250 3600 4250
$Comp
L Device:C_Small C?
U 1 1 5EFAF813
P 3700 4250
F 0 "C?" V 3900 4250 50  0000 C CNN
F 1 "0.1u" V 3800 4250 50  0000 C CNN
F 2 "" H 3700 4250 50  0001 C CNN
F 3 "~" H 3700 4250 50  0001 C CNN
	1    3700 4250
	0    1    1    0   
$EndComp
$Comp
L local_symbols:NCS2333 U?
U 2 1 5EF06EE8
P 3650 3950
F 0 "U?" H 3650 4315 50  0000 C CNN
F 1 "NCS2333" H 3650 4224 50  0000 C CNN
F 2 "local_footprints:SOIC-8_3.9x4.9mm_Pitch1.27mm_HS" H 3650 3600 50  0001 C CNN
F 3 "" H 3700 3950 50  0001 C CNN
	2    3650 3950
	1    0    0    -1  
$EndComp
$Comp
L Device:R_POT RV?
U 1 1 5EF082B4
P 4550 4550
F 0 "RV?" H 4500 4650 50  0000 R CNN
F 1 "R_POT" H 4500 4550 50  0000 R CNN
F 2 "" H 4550 4550 50  0001 C CNN
F 3 "~" H 4550 4550 50  0001 C CNN
	1    4550 4550
	-1   0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 5EF0AF04
P 4100 4750
F 0 "#PWR?" H 4100 4500 50  0001 C CNN
F 1 "GND" H 4105 4577 50  0000 C CNN
F 2 "" H 4100 4750 50  0001 C CNN
F 3 "" H 4100 4750 50  0001 C CNN
	1    4100 4750
	1    0    0    -1  
$EndComp
Wire Wire Line
	3350 3900 3000 3900
Text Notes 900  3750 0    50   ~ 0
Load connection,\nif sensing low-side.
Wire Wire Line
	2100 3750 2200 3750
Wire Wire Line
	2100 3650 2200 3650
Text GLabel 2200 3650 2    50   Input ~ 0
V+
Connection ~ 3000 3750
Wire Wire Line
	3000 3750 3000 3650
Text Notes 2900 3600 0    50   ~ 0
Load
Text Notes 2650 5150 0    50   ~ 0
Simple low-side current sensing
Text GLabel 4250 3950 2    50   Input ~ 0
VOUT1
Wire Wire Line
	2950 3750 3000 3750
Wire Wire Line
	3000 3750 3000 3900
Text GLabel 2950 3750 0    50   Input ~ 0
V1-
Connection ~ 3000 3900
$Comp
L power:GND #PWR?
U 1 1 5EF0F7F8
P 3000 4350
F 0 "#PWR?" H 3000 4100 50  0001 C CNN
F 1 "GND" H 3005 4177 50  0000 C CNN
F 2 "" H 3000 4350 50  0001 C CNN
F 3 "" H 3000 4350 50  0001 C CNN
	1    3000 4350
	1    0    0    -1  
$EndComp
Wire Wire Line
	3000 4300 3000 4350
Wire Wire Line
	3000 3900 3000 4000
$Comp
L Device:R R?
U 1 1 5EF0C80B
P 3000 4150
F 0 "R?" H 2931 4104 50  0000 R CNN
F 1 "1" H 2931 4195 50  0000 R CNN
F 2 "" V 2930 4150 50  0001 C CNN
F 3 "~" H 3000 4150 50  0001 C CNN
	1    3000 4150
	1    0    0    1   
$EndComp
Wire Wire Line
	3300 4000 3350 4000
Wire Wire Line
	3300 4250 3300 4000
Wire Notes Line
	2650 1100 5600 1100
Wire Notes Line
	5600 1100 5600 2700
Wire Notes Line
	5600 2700 2650 2700
Wire Notes Line
	2650 2700 2650 1100
Wire Notes Line
	2650 3250 4900 3250
Wire Notes Line
	4900 3250 4900 5050
Wire Notes Line
	4900 5050 2650 5050
Wire Notes Line
	2650 5050 2650 3250
Wire Wire Line
	7350 1550 7350 1500
Wire Wire Line
	7350 1500 7650 1500
Text GLabel 7750 1500 2    50   Input ~ 0
V+
$Comp
L Device:C_Small C?
U 1 1 5EFED469
P 7650 1800
F 0 "C?" H 7800 1850 50  0000 C CNN
F 1 "0.1u" H 7800 1750 50  0000 C CNN
F 2 "" H 7650 1800 50  0001 C CNN
F 3 "~" H 7650 1800 50  0001 C CNN
	1    7650 1800
	1    0    0    -1  
$EndComp
Wire Wire Line
	7350 2100 7650 2100
Wire Wire Line
	7650 2100 7650 1900
Wire Wire Line
	7650 1700 7650 1500
Wire Wire Line
	7650 1500 7750 1500
Connection ~ 7650 1500
Connection ~ 7650 2100
Wire Wire Line
	7650 2100 7650 2150
Text Notes 7300 1400 0    50   ~ 0
NCS2333 supply\nis using V+
Text Notes 8550 1750 0    50   ~ 0
TODO: add micro USB as input option?
Wire Wire Line
	3250 1250 4100 1250
Wire Wire Line
	3250 1600 4500 1600
Wire Wire Line
	3300 4550 4100 4550
$EndSCHEMATC
